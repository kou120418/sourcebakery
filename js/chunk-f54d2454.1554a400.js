(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f54d2454"],{"07ac":function(e,t,c){var o=c("23e7"),n=c("6f53").values;o({target:"Object",stat:!0},{values:function(e){return n(e)}})},"1fa0":function(e,t,c){},"6f53":function(e,t,c){var o=c("83ab"),n=c("df75"),l=c("fc6a"),a=c("d1e7").f,r=function(e){return function(t){var c,r=l(t),d=n(r),i=d.length,s=0,u=[];while(i>s)c=d[s++],o&&!a.call(r,c)||u.push(e?[c,r[c]]:r[c]);return u}};e.exports={entries:r(!0),values:r(!1)}},"724a":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var o=c("7a23"),n=function(e){return Object(o["pushScopeId"])("data-v-7816ad17"),e=e(),Object(o["popScopeId"])(),e},l={class:"container content position-relative"},a=n((function(){return Object(o["createElementVNode"])("h2",{class:"text-center mt-4"},"商品列表",-1)})),r={class:"text-end position-absolute w-100",style:{top:"0"}},d={class:"table mt-4"},i=n((function(){return Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{width:"6%"},"排序"),Object(o["createElementVNode"])("th",{width:"10%"},"商品縮圖"),Object(o["createElementVNode"])("th",{width:"10%"},"商品名稱"),Object(o["createElementVNode"])("th",{width:"20%"},"商品敘述"),Object(o["createElementVNode"])("th",{width:"12%"},"商品規格"),Object(o["createElementVNode"])("th",{width:"10%"},"原價"),Object(o["createElementVNode"])("th",{width:"10%"},"售價"),Object(o["createElementVNode"])("th",{width:"10%"},"是否啟用"),Object(o["createElementVNode"])("th",{width:"12%"},"編輯／刪除")])],-1)})),s={class:"align-middle"},u={class:"product-img"},m=["src","alt"],b={key:0,class:"text-success"},p={key:1},j={class:"btn-group"},O=["onClick"],f=["onClick"],h=Object(o["createTextVNode"])(" 本頁總共有 "),g={id:"productCount"},V=Object(o["createTextVNode"])(" 項商品 "),N={class:"d-flex justify-content-center mt-5 mb-4"};function E(e,t,c,n,E,v){var y=Object(o["resolveComponent"])("Pagination"),P=Object(o["resolveComponent"])("AdminProductModal"),k=Object(o["resolveComponent"])("DeleteProductModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[a,Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(e){return v.openModal("new")})}," 建立新的商品 ")]),Object(o["createElementVNode"])("table",d,[i,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(E.adminProducts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tbody",{id:"AdminProductsList",key:t},[Object(o["createElementVNode"])("tr",s,[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.num),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("img",{src:t.imageUrl,alt:t.title},null,8,m)])]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.title),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.description),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.content),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.origin_price)),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.price)),1),Object(o["createElementVNode"])("td",null,[t.is_enabled?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",b,"啟用")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,"未啟用"))]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return v.openModal("edit",t)}}," 編輯 ",8,O),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return v.openModal("delete",t)}}," 刪除 ",8,f)])])])])})),128))]),Object(o["createElementVNode"])("p",null,[h,Object(o["createElementVNode"])("span",g,Object(o["toDisplayString"])(E.adminProducts.length),1),V]),Object(o["createElementVNode"])("div",N,[Object(o["createVNode"])(y,{page:E.pagination,onGetPage:v.getAdminProducts},null,8,["page","onGetPage"])]),Object(o["createVNode"])(P,{ref:"adminModal","props-product":E.tempProduct,onUpdateProduct:v.updateProduct},null,8,["props-product","onUpdateProduct"]),Object(o["createVNode"])(k,{ref:"adminDelModal","props-product":E.tempProduct,onDeleteProduct:v.deleteProduct},null,8,["props-product","onDeleteProduct"])])}var v=c("5530"),y=(c("99af"),c("07ac"),c("1671")),P=(c("a434"),{class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),k={class:"modal-dialog modal-xl modal-dialog-centered"},x={class:"modal-content border-0"},w={class:"modal-header bg-primary text-white"},M={id:"productModalLabel",class:"modal-title"},U={key:0},B={key:1},D=Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_={class:"modal-body"},C={class:"row"},S={class:"col-sm-4"},T={class:"mb-1"},I={class:"form-group"},$=Object(o["createElementVNode"])("label",{class:"text-light bg-secondary mb-2 py-1 px-2",for:"mainImageUrl"},"請輸入主圖片網址",-1),A=["src","alt"],L={class:"btn btn-outline-success btn-sm d-block w-100 mt-3"},F=Object(o["createTextVNode"])(" 上傳圖片 "),G=Object(o["createElementVNode"])("div",{class:"mt-4 mb-1"},"多圖新增",-1),J={key:0},q=Object(o["createElementVNode"])("hr",null,null,-1),z={class:"form-group"},H=["for"],K=["id","onUpdate:modelValue"],Q=["src"],R={class:"btn btn-outline-success btn-sm d-block w-100 my-3"},W=Object(o["createTextVNode"])(" 上傳圖片 "),X={class:"mb2"},Y=["onClick"],Z={key:0,class:"mt-4"},ee={key:1},te={class:"mt-4 mb-2"},ce={class:"col-sm-8"},oe={class:"form-group"},ne=Object(o["createElementVNode"])("label",{for:"title"},"標題",-1),le={class:"row mt-3"},ae={class:"form-group col-md-6"},re=Object(o["createElementVNode"])("label",{for:"category"},"分類",-1),de={class:"form-group col-md-6"},ie=Object(o["createElementVNode"])("label",{for:"unit"},"單位(個、台、隻...)",-1),se={class:"row mt-3"},ue={class:"form-group col-md-6"},me=Object(o["createElementVNode"])("label",{for:"origin_price"},"原價",-1),be={class:"form-group col-md-6"},pe=Object(o["createElementVNode"])("label",{for:"price"},"售價",-1),je=Object(o["createElementVNode"])("hr",null,null,-1),Oe={class:"form-group"},fe=Object(o["createElementVNode"])("label",{for:"description"},"商品描述",-1),he={class:"form-group mt-3"},ge=Object(o["createElementVNode"])("label",{for:"content"},"商品規格",-1),Ve=Object(o["createElementVNode"])("hr",null,null,-1),Ne={class:"form-group"},Ee=Object(o["createElementVNode"])("label",{for:"stuck"},"庫存(選填)",-1),ve={class:"form-group mt-3"},ye={class:"form-check"},Pe=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ke={class:"modal-footer"},xe=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function we(e,t,c,n,l,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",P,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("h3",M,[c.propsProduct.title?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",U,"編輯商品")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",B,"新增商品"))]),D]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",I,[$,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"mainImageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.editProduct.imageUrl=e})},null,512),[[o["vModelText"],l.editProduct.imageUrl,void 0,{trim:!0}]]),Object(o["createElementVNode"])("img",{class:"img-fluid my-3 form-img",src:l.editProduct.imageUrl,alt:l.editProduct.title},null,8,A)]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",L,[Object(o["createElementVNode"])("input",{id:"upload_img",style:{display:"none"},type:"file",onChange:t[1]||(t[1]=function(){return a.uploadMainImgage&&a.uploadMainImgage.apply(a,arguments)})},null,32),F])])]),G,Array.isArray(l.editProduct.imagesUrl)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",J,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.editProduct.imagesUrl,(function(c,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"mb-4",key:"addImage"+n},[q,Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("label",{class:"text-light bg-secondary mb-2 py-1 px-2",for:"subImageUrl-"+n},"請輸入副圖片 "+Object(o["toDisplayString"])(n+1)+" 的網址",9,H),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"subImageUrl-"+n,type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(e){return l.editProduct.imagesUrl[n]=e}},null,8,K),[[o["vModelText"],l.editProduct.imagesUrl[n]]]),Object(o["createElementVNode"])("img",{class:"img-fluid my-3 form-img",src:c,alt:""},null,8,Q),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",R,[Object(o["createElementVNode"])("input",{id:"upload_img",style:{display:"none"},type:"file",onChange:t[2]||(t[2]=function(){return e.uploadSubImgage&&e.uploadSubImgage.apply(e,arguments)})},null,32),W])]),Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:function(e){return l.editProduct.imagesUrl.splice(n,1)}}," 刪除圖片 ",8,Y)])])])})),128)),!l.editProduct.imagesUrl.length||l.editProduct.imagesUrl[l.editProduct.imagesUrl.length-1]?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Z,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=function(e){return l.editProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(o["createCommentVNode"])("",!0)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ee,[Object(o["createElementVNode"])("div",te,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[4]||(t[4]=function(){return a.createImages&&a.createImages.apply(a,arguments)})}," 新增圖片 ")])]))]),Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("div",oe,[ne,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"title",type:"text",class:"form-control mt-1",placeholder:"請輸入標題","onUpdate:modelValue":t[5]||(t[5]=function(e){return l.editProduct.title=e})},null,512),[[o["vModelText"],l.editProduct.title,void 0,{trim:!0}]])]),Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",ae,[re,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"category",type:"text",class:"form-control mt-1",placeholder:"請輸入分類","onUpdate:modelValue":t[6]||(t[6]=function(e){return l.editProduct.category=e})},null,512),[[o["vModelText"],l.editProduct.category]])]),Object(o["createElementVNode"])("div",de,[ie,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"unit",type:"text",class:"form-control mt-1",placeholder:"請輸入單位","onUpdate:modelValue":t[7]||(t[7]=function(e){return l.editProduct.unit=e})},null,512),[[o["vModelText"],l.editProduct.unit]])])]),Object(o["createElementVNode"])("div",se,[Object(o["createElementVNode"])("div",ue,[me,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入原價","onUpdate:modelValue":t[8]||(t[8]=function(e){return l.editProduct.origin_price=e})},null,512),[[o["vModelText"],l.editProduct.origin_price,void 0,{number:!0}]])]),Object(o["createElementVNode"])("div",be,[pe,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入售價","onUpdate:modelValue":t[9]||(t[9]=function(e){return l.editProduct.price=e})},null,512),[[o["vModelText"],l.editProduct.price,void 0,{number:!0}]])])]),je,Object(o["createElementVNode"])("div",Oe,[fe,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control mt-1",placeholder:"請輸入商品描述",rows:"6","onUpdate:modelValue":t[10]||(t[10]=function(e){return l.editProduct.description=e})},"\n                ",512),[[o["vModelText"],l.editProduct.description,void 0,{trim:!0}]])]),Object(o["createElementVNode"])("div",he,[ge,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"content",type:"text",class:"form-control mt-1",placeholder:"請輸入商品規格",rows:"4","onUpdate:modelValue":t[11]||(t[11]=function(e){return l.editProduct.content=e})},"\n                ",512),[[o["vModelText"],l.editProduct.content,void 0,{trim:!0}]])]),Ve,Object(o["createElementVNode"])("div",Ne,[Ee,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"stuck",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入庫存量","onUpdate:modelValue":t[12]||(t[12]=function(e){return l.editProduct.stuck=e})},null,512),[[o["vModelText"],l.editProduct.stuck,void 0,{number:!0}]])]),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("div",ye,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[13]||(t[13]=function(e){return l.editProduct.is_enabled=e})},null,512),[[o["vModelCheckbox"],l.editProduct.is_enabled]]),Pe])])])])]),Object(o["createElementVNode"])("div",ke,[xe,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=function(t){return e.$emit("update-product",c.propsProduct)})}," 確認 ")])])])],512)}var Me=c("a8d2"),Ue={emit:["update-product"],props:{propsProduct:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",editProduct:[]}},methods:{createImages:function(){this.editProduct.imagesUrl=[""]},uploadMainImgage:function(e){var t=this;console.dir(e);var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/admin/upload"),o=e.target.files[0],n=new FormData;n.append("file-to-upload",o),this.$http.post(c,n).then((function(e){t.editProduct.imageUrl=e.data.imageUrl})).catch((function(e){console.log(e)}))}},watch:{propsProduct:function(){this.editProduct=this.propsProduct}},mixins:[Me["a"]]},Be=c("6b0d"),De=c.n(Be),_e=De()(Ue,[["render",we]]),Ce={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Se={class:"modal-dialog modal-dialog-centered"},Te={class:"modal-content border-0"},Ie=Object(o["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(o["createElementVNode"])("h3",{id:"delProductModalLabel",class:"modal-title"},[Object(o["createElementVNode"])("span",null,"刪除商品")]),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$e={class:"modal-body"},Ae=Object(o["createTextVNode"])(" 是否刪除 "),Le={class:"text-danger"},Fe=Object(o["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),Ge={class:"modal-footer"},Je=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function qe(e,t,c,n,l,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ce,[Object(o["createElementVNode"])("div",Se,[Object(o["createElementVNode"])("div",Te,[Ie,Object(o["createElementVNode"])("div",$e,[Ae,Object(o["createElementVNode"])("strong",Le,Object(o["toDisplayString"])(c.propsProduct.title),1),Fe]),Object(o["createElementVNode"])("div",Ge,[Je,Object(o["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("delete-product",c.propsProduct)}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var ze={emits:["delete-product"],props:{propsProduct:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mixins:[Me["a"]]},He=De()(ze,[["render",qe]]),Ke={data:function(){return{pagination:{},adminProducts:[],allproductsNum:"",tempProduct:{imagesUrl:[]},isNew:!0}},components:{Pagination:y["a"],AdminProductModal:_e,DeleteProductModal:He},methods:{getAdminProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination.current_page||1,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/admin/products?page=").concat(t);this.$http.get(c).then((function(t){if(t.data.success){var c=t.data.products,o=t.data.pagination;console.log(t.data),console.log(t.data.pagination),e.adminProducts=c,e.pagination=o}})).catch((function(e){console.log(e)}))},getAllproducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/products/all");this.$http.get(t).then((function(t){e.allproductsNum=Object.values(t.data.products)})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"new":this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.adminModal.openModal();break;case"edit":this.getAdminProducts(),this.tempProduct=Object(v["a"])({},t),this.isNew=!1,this.$refs.adminModal.openModal();break;case"delete":this.tempProduct=Object(v["a"])({},t),this.$refs.adminDelModal.openModal();break;default:break}},updateProduct:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/admin/product/"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/admin/product/").concat(e.id),o="put"),this.$http[o](c,{data:e}).then((function(e){e.data.success?(t.$refs.adminModal.hideModal(),t.getAdminProducts()):console.log(e.data.message)})).catch((function(e){console.log(e)}))},deleteProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/admin/product/").concat(this.tempProduct.id);this.$http.delete(t).then((function(t){t.data.success&&(e.$refs.adminDelModal.hideModal(),e.getAdminProducts())})).catch((function(e){console.log(e)}))}},mounted:function(){this.getAdminProducts()}};c("c110"),t["default"]=De()(Ke,[["render",E],["__scopeId","data-v-7816ad17"]])},a434:function(e,t,c){"use strict";var o=c("23e7"),n=c("23cb"),l=c("a691"),a=c("50c4"),r=c("7b0b"),d=c("65f0"),i=c("8418"),s=c("1dde"),u=s("splice"),m=Math.max,b=Math.min,p=9007199254740991,j="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,o,s,u,O,f,h=r(this),g=a(h.length),V=n(e,g),N=arguments.length;if(0===N?c=o=0:1===N?(c=0,o=g-V):(c=N-2,o=b(m(l(t),0),g-V)),g+c-o>p)throw TypeError(j);for(s=d(h,o),u=0;u<o;u++)O=V+u,O in h&&i(s,u,h[O]);if(s.length=o,c<o){for(u=V;u<g-o;u++)O=u+o,f=u+c,O in h?h[f]=h[O]:delete h[f];for(u=g;u>g-o+c;u--)delete h[u-1]}else if(c>o)for(u=g-o;u>V;u--)O=u+o-1,f=u+c-1,O in h?h[f]=h[O]:delete h[f];for(u=0;u<c;u++)h[u+V]=arguments[u+2];return h.length=g-o+c,s}})},c110:function(e,t,c){"use strict";c("1fa0")},e01a:function(e,t,c){"use strict";var o=c("23e7"),n=c("83ab"),l=c("da84"),a=c("5135"),r=c("1626"),d=c("861d"),i=c("9bf2").f,s=c("e893"),u=l.Symbol;if(n&&r(u)&&(!("description"in u.prototype)||void 0!==u().description)){var m={},b=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof b?new u(e):void 0===e?u():u(e);return""===e&&(m[t]=!0),t};s(b,u);var p=b.prototype=u.prototype;p.constructor=b;var j=p.toString,O="Symbol(test)"==String(u("test")),f=/^Symbol\((.*)\)[^)]+$/;i(p,"description",{configurable:!0,get:function(){var e=d(this)?this.valueOf():this,t=j.call(e);if(a(m,e))return"";var c=O?t.slice(7,-1):t.replace(f,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-f54d2454.1554a400.js.map