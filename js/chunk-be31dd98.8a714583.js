(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be31dd98"],{b0c0:function(e,t,c){var a=c("83ab"),l=c("5e77").EXISTS,o=c("9bf2").f,r=Function.prototype,s=r.toString,n=/^\s*function ([^ (]*)/,i="name";a&&!l&&o(r,i,{configurable:!0,get:function(){try{return s.call(this).match(n)[1]}catch(e){return""}}})},e4f3:function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},l=a();t["a"]=l},edbb:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),l={id:"main",class:"container-lg content"},o=Object(a["createElementVNode"])("h2",{class:"p-5"},null,-1),r={class:"container"},s=Object(a["createElementVNode"])("div",{class:"bg-light p-3 pb-1 my-3"},[Object(a["createElementVNode"])("figure",{class:"text-center mx-auto"},[Object(a["createElementVNode"])("h2",null,"購物車明細")])],-1),n={class:"w-100 w-lg-75 mx-auto"},i={key:0,class:"row justify-content-center mt-3 mt-md-5"},d={class:"col-12"},m={class:"bg-opacity p-3"},b=Object(a["createElementVNode"])("h3",{class:"mb-3"},"購買品項",-1),u={class:"p-table table align-middle"},p=Object(a["createElementVNode"])("thead",{class:"p-table__head"},[Object(a["createElementVNode"])("tr",{class:"text-dark"},[Object(a["createElementVNode"])("th",{class:"p-table__th--name text-center fs-7 fs-sm-6"}," 商品 "),Object(a["createElementVNode"])("th",{width:"15%",class:"text-center fs-7 fs-sm-6"},"單價"),Object(a["createElementVNode"])("th",{width:"20%",class:"text-center fs-7 fs-sm-6"},"數量"),Object(a["createElementVNode"])("th",{width:"30%",class:"text-end fs-7 fs-sm-6"},"小計")])],-1),j={class:"p-table__body"},O={class:"p-table__foot"},f={class:"text-light"},h={key:0,colspan:"4",class:"text-end"},N={key:0},g={key:1,class:"text-end"},E={key:0},V={colspan:"4",class:"text-end text-light"},v={key:1,class:"row justify-content-center mt-3 mt-md-5"},y={class:"bg-opacity p-3"},k=Object(a["createElementVNode"])("h3",{class:"mb-3"},"已填寫的客戶資訊",-1),x={class:"row"},w={class:"col-12 col-sm-6 col-lg-3 mb-3"},B=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),_={class:"col-12 col-sm-6 col-lg-3 mb-3"},C=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),S={class:"col-12 col-sm-6 col-lg-3 mb-3"},$=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),F={class:"col-12 col-sm-6 col-lg-3 mb-3"},T=Object(a["createElementVNode"])("label",{for:"payment",class:"form-label"},"付款方式",-1),D={class:"row g-0"},I={class:"col-12 col-md-8 mx-auto mb-3"},A=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),L={class:"col-12 col-md-8 mx-auto"},q=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),J=["value"],z={class:"d-flex justify-content-between mt-3"},M=Object(a["createTextVNode"])("返回填寫訂單"),U=["disabled"],X={class:"setDisplay"},G={key:0,class:"bi bi-arrow-repeat rotating me-1"},H={key:1,class:"bi bi-check-lg me-1"},K=Object(a["createTextVNode"])("成立訂單 "),P={key:2,class:"bg-opacity mt-3 mt-md-5 p-3"},Q=Object(a["createElementVNode"])("p",{class:"text-center mb-0"},"請先將商品加入購物車",-1),R=[Q];function W(e,t,c,Q,W,Y){var Z,ee,te=Object(a["resolveComponent"])("Loading"),ce=Object(a["resolveComponent"])("ConfirmCart"),ae=Object(a["resolveComponent"])("Field"),le=Object(a["resolveComponent"])("router-link"),oe=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(te,{active:W.isLoading,"z-index":1500},null,8,["active"]),Object(a["createElementVNode"])("main",l,[o,Object(a["createElementVNode"])("div",r,[s,Object(a["createElementVNode"])("div",n,[W.carts.total>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",m,[b,Object(a["createElementVNode"])("table",u,[p,Object(a["createElementVNode"])("tbody",j,[W.carts.carts?(Object(a["openBlock"])(),Object(a["createBlock"])(ce,{key:0,"cart-items":W.carts},null,8,["cart-items"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("tfoot",O,[Object(a["createElementVNode"])("tr",f,[(null===(Z=W.carts)||void 0===Z||null===(ee=Z.carts)||void 0===ee?void 0:ee.length)>=1?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",h,[W.carts.final_total!==W.carts.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("del",N," 總計： NT$"+Object(a["toDisplayString"])(e.$filters.currency(this.carts.total))+" NTD",1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("總計： NT$"+Object(a["toDisplayString"])(e.$filters.currency(this.carts.total))+" NTD",1)],64))])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",g,"尚無商品"))]),W.carts.final_total!==W.carts.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",E,[Object(a["createElementVNode"])("td",V," NT$"+Object(a["toDisplayString"])(e.$filters.currency(W.carts.final_total))+" NTD ",1)])):Object(a["createCommentVNode"])("",!0)])])])])])):Object(a["createCommentVNode"])("",!0),W.carts.total>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createVNode"])(oe,{ref:"form",onSubmit:Y.onSubmit,class:"col-12"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",y,[k,Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",w,[B,Object(a["createVNode"])(ae,{id:"name",name:"姓名",type:"text",class:"form-control",placeholder:"請輸入 姓名",rules:"required",value:c.propsForm.user.name,disabled:""},null,8,["value"])]),Object(a["createElementVNode"])("div",_,[C,Object(a["createVNode"])(ae,{id:"email",name:"信箱",type:"email",class:"form-control",placeholder:"請輸入 Email",rules:"email|required",value:c.propsForm.user.email,disabled:""},null,8,["value"])]),Object(a["createElementVNode"])("div",S,[$,Object(a["createVNode"])(ae,{id:"tel",name:"電話",type:"tel",class:"form-control",placeholder:"請輸入 電話",value:c.propsForm.user.tel,disabled:""},null,8,["value"])]),Object(a["createElementVNode"])("div",F,[T,Object(a["createVNode"])(ae,{id:"payment",class:"form-control",name:"付款方式",rules:"required",value:c.propsForm.user.payment_method,disabled:""},null,8,["value"])])]),Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("div",I,[A,Object(a["createVNode"])(ae,{id:"address",name:"地址",type:"text",class:"form-control",placeholder:"請輸入 地址",rules:"required",value:c.propsForm.user.address,disabled:""},null,8,["value"])]),Object(a["createElementVNode"])("div",L,[q,Object(a["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10",value:c.propsForm.message,disabled:""},null,8,J)])]),Object(a["createElementVNode"])("div",z,[Object(a["createVNode"])(le,{class:"btn btn-secondary",to:"/cart/cartform"},{default:Object(a["withCtx"])((function(){return[M]})),_:1}),Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-danger",disabled:W.carts.carts<=1},[Object(a["createElementVNode"])("span",X,[2===W.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",G)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",H)),K])],8,U)])])]})),_:1},8,["onSubmit"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",P,R))])])])],64)}c("99af");var Y=c("e4f3"),Z={class:"d-sm-flex align-items-center"},ee=["src","alt"],te={class:"ps-2"},ce={class:"badge bg-nobeta"},ae={class:"fs-7 fs-sm-6"},le={class:"text-center"},oe={class:"text-center"},re={class:"text-end"},se={key:0,class:"text-success"};function ne(e,t,c,l,o,r){return Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.cartItems.carts,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("figure",Z,[Object(a["createElementVNode"])("img",{class:"product-img",src:t.product.imageUrl,alt:t.product.title},null,8,ee),Object(a["createElementVNode"])("figcaption",te,[Object(a["createElementVNode"])("span",ce,Object(a["toDisplayString"])(t.product.category),1),Object(a["createElementVNode"])("p",ae,Object(a["toDisplayString"])(t.product.title),1)])])]),Object(a["createElementVNode"])("td",le," NT$"+Object(a["toDisplayString"])(e.$filters.currency(t.product.price)),1),Object(a["createElementVNode"])("td",oe,Object(a["toDisplayString"])(t.qty),1),Object(a["createElementVNode"])("td",re,[t.final_total!==t.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",se,"折扣價：")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])("NT$"+Object(a["toDisplayString"])(e.$filters.currency(t.final_total))+" NTD ",1)])])})),128)}var ie={props:{cartItems:{type:Object,default:function(){return{}}}}},de=c("6b0d"),me=c.n(de),be=me()(ie,[["render",ne]]),ue={name:"CartConfirm",props:{propsForm:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,loadingStatus:{loadingItem:""},carts:"",form:{}}},components:{ConfirmCart:be},methods:{showAlert:function(e){this.$swal(e.data.message)},showErrorAlert:function(){this.$swal({title:"請先加入商品至購物車",icon:"error"})},check:function(){this.carts.carts.length<1&&(this.showErrorAlert(),this.$router.push("/products"))},getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.carts=t.data.data,Y["a"].emit("update-cart"),e.check(),e.isLoading=!1)})).catch((function(t){e.showErrorAlert(t)}))},getCartOnly:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.carts=t.data.data,Y["a"].emit("update-cart"))})).catch((function(t){e.showErrorAlert(t)}))},onSubmit:function(){var e=this;this.loadingStatus.loadingItem=2;var t={data:{user:this.propsForm.user,message:this.propsForm.message}},c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("kouyu_api_practice","/order");this.$http.post(c,t).then((function(t){t.data.success&&(e.$refs.form.resetForm(),e.form.message="",e.showAlert(t),e.loadingStatus.loadingItem="",e.getCartOnly(),e.$router.push("/cartorder/".concat(t.data.orderId)))})).catch((function(t){e.showErrorAlert(t)}))}},mounted:function(){this.getCart()}};t["default"]=me()(ue,[["render",W]])}}]);
//# sourceMappingURL=chunk-be31dd98.8a714583.js.map